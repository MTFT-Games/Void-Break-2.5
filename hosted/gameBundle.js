(()=>{"use strict";const{useState:e}=React,t=({modalOpen:t,setModalOpen:s,setAccount:a})=>{const[i,l]=e(!1);return React.createElement("div",{className:"modal "+(t?"is-active":"")},React.createElement("div",{className:"modal-background",onClick:()=>s(!1)}),React.createElement("div",{className:"modal-card"},React.createElement("header",{className:"modal-card-head"},React.createElement("p",{className:"modal-card-title"},i?"Sign Up":"Login"),React.createElement("button",{className:"delete","aria-label":"close",onClick:()=>s(!1)})),React.createElement("section",{className:"modal-card-body"},React.createElement("div",{className:"tabs"},React.createElement("ul",null,React.createElement("li",{className:i?"":"is-active"},React.createElement("a",{onClick:()=>l(!1)},"Login")),React.createElement("li",{className:i?"is-active":""},React.createElement("a",{onClick:()=>l(!0)},"Sign Up")))),i?React.createElement("form",{id:"signupForm",name:"signupForm",onSubmit:async e=>{e.preventDefault();const t=e.target.querySelector("#username").value,s=e.target.querySelector("#pass").value,i=e.target.querySelector("#pass2").value,l=e.target.querySelector("#email").value;if(s!==i)return e.target.querySelector("#pass2").value="",e.target.querySelector("#pass2").placeholder="Passwords don't match",void e.target.querySelector("#pass2").classList.add("is-danger");const h=await fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,pass:s,pass2:i,email:l})}),n=await h.json();if(h.ok)return void a(n);if("UserTaken"==n.id)return e.target.querySelector("#username").value="",e.target.querySelector("#username").placeholder="Username already taken",void e.target.querySelector("#username").classList.add("is-danger");const r=document.createElement("p");r.classList.add("is-danger"),r.textContent="An unknown error occurred, please try again later.",e.target.appendChild(r)},action:"/signup",method:"POST"},React.createElement("div",{className:"field"},React.createElement("label",{className:"label"},"Username"),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",name:"username",id:"username",type:"text",placeholder:"Username",required:!0}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label"},"Email"),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",name:"email",id:"email",type:"email",placeholder:"Email",required:!0}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-envelope"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label"},"Password"),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",name:"pass",id:"pass",type:"password",placeholder:"Password",required:!0}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-key"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label"},"Confirm Password"),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",name:"pass2",id:"pass2",type:"password",placeholder:"Re-type Password",required:!0}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-key"})))),React.createElement("div",{className:"field is-grouped"},React.createElement("div",{className:"control"},React.createElement("input",{type:"submit",className:"button is-primary",value:"Submit"})),React.createElement("div",{className:"control"},React.createElement("button",{className:"button is-text",onClick:()=>s(!1)},"Cancel")))):React.createElement("form",{id:"loginForm",name:"loginForm",onSubmit:async e=>{e.preventDefault();const t=e.target.querySelector("#username").value,s=e.target.querySelector("#pass").value,i=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,pass:s})}),l=await i.json();if(i.ok)return void a(l);if("BadAuth"==l.id)return e.target.querySelector("#username").value="",e.target.querySelector("#username").classList.add("is-danger"),e.target.querySelector("#pass2").value="",void e.target.querySelector("#pass2").classList.add("is-danger");const h=document.createElement("p");h.classList.add("is-danger"),h.textContent="An unknown error occurred, please try again later.",e.target.appendChild(h)},action:"/login",method:"POST"},React.createElement("div",{className:"field"},React.createElement("label",{className:"label"},"Username"),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",name:"username",id:"username",type:"text",placeholder:"Username",required:!0}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label"},"Password"),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",name:"pass",id:"pass",type:"password",placeholder:"Password",required:!0}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-key"})))),React.createElement("div",{className:"field is-grouped"},React.createElement("div",{className:"control"},React.createElement("input",{type:"submit",className:"button is-primary",value:"Submit"})),React.createElement("div",{className:"control"},React.createElement("button",{className:"button is-text",onClick:()=>s(!1)},"Cancel")))))))},{useState:s}=React,a=({initialAccount:e})=>{const[a,i]=s(e),[l,h]=s(!1);return React.createElement("div",{className:"navbar-item is-tab has-text-light dropdown is-hoverable is-right"+(l?" is-active":"")},React.createElement("div",{className:"dropdown-trigger"},"Account"),React.createElement("div",{className:"dropdown-menu"},React.createElement("div",{className:"dropdown-content has-text-dark"},(e=>e?React.createElement("div",{className:"is-flex is-flex-direction-column is-align-items-center"},React.createElement("p",null,e.username),React.createElement("p",null,e.email),React.createElement("button",{className:"button",onClick:()=>{fetch("/logout").then((()=>i(null)))}},"Logout")):React.createElement("div",{className:"is-flex is-flex-direction-column is-align-items-center"},React.createElement("p",null,"Not logged in"),React.createElement("button",{className:"button",onClick:()=>h(!0)},"Login/Signup"),React.createElement(t,{modalOpen:l,setModalOpen:h,setAccount:i})))(a))))},{useState:i}=React,l=({active:e,account:t})=>{const[s,l]=i(!1);return React.createElement("header",null,React.createElement("nav",{className:"navbar py-3"},React.createElement("div",{className:"navbar-brand"},React.createElement("a",{href:"/",className:"navbar-item"},React.createElement("i",{className:"fa-brands fa-battle-net is-size-3 has-text-light mr-2"}),React.createElement("h1",{className:"title has-text-light"},"Void Break 2")),React.createElement("a",{className:"navbar-burger has-text-light "+(s?"is-active":""),onClick:()=>l(!s)},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))),React.createElement("div",{className:"navbar-menu "+(s?"is-active":"")},React.createElement("div",{className:"navbar-end"},React.createElement("a",{className:"navbar-item is-tab has-text-light "+("about"===e?"is-active":""),href:"/",id:"about"},"About"),React.createElement("a",{className:"navbar-item is-tab has-text-light "+("game"===e?"is-active":""),href:"/game",id:"game"},"Game"),React.createElement(a,{initialAccount:t})))))},h=document.getElementById("nav-header"),n=h.textContent.split("|"),r=n[1]?JSON.parse(n[1]):null;function c(e,t){if((e.pos.x-t.pos.x)*(e.pos.x-t.pos.x)+(e.pos.y-t.pos.y)*(e.pos.y-t.pos.y)<=(e.radius+t.radius)*(e.radius+t.radius))return!0}ReactDOM.render(React.createElement(l,{active:n[0],account:r}),h);class o{constructor(e,t={x:0,y:0},s=0,a){this.worldSize=a,this.pos={x:e.x,y:e.y},this.vel={x:t.x,y:t.y},this.angle=s}move(e){this.pos.x+=this.vel.x*e,this.pos.y+=this.vel.y*e}update(e){this.move(e),this.pos.x<0?this.pos.x+=this.worldSize:this.pos.x>this.worldSize&&(this.pos.x-=this.worldSize),this.pos.y<0?this.pos.y+=this.worldSize:this.pos.y>this.worldSize&&(this.pos.y-=this.worldSize)}}class d extends o{constructor(e,t){super(e,{x:0,y:0},0,t.worldSize),this.sounds=t.sounds,this.game=t}reset(){this.worldSize=this.game.worldSize,this.friction=this.game.defaults.player.friction,this.vel={x:this.worldSize/3,y:-this.worldSize/3},this.thrust=this.game.defaults.player.thrust,this.turnSpeed=this.game.defaults.player.turnSpeed,this.turning={cw:0,ccw:0},this.thrusting=!1,this.angle=45,this.radius=16,this.health={max:this.game.defaults.player.baseHealth,current:this.game.defaults.player.baseHealth},this.shield={max:this.game.defaults.player.baseShield,current:this.game.defaults.player.baseShield},this.damageCooldown={max:this.game.defaults.player.regenCooldown,current:0},this.regenRate=this.game.defaults.player.regenRate,this.projectiles=this.game.defaults.player.baseProjectiles,this.bullet=this.game.defaults.player.baseBullet,this.bullets=[],this.firing=!1,this.startFiring=!1,this.bulletLimit=this.game.defaults.player.bulletLimit}draw(){const e=this.game.canvas,t=this.game.ctx;t.save(),t.translate(e.width/2,e.height/2),t.rotate(this.angle*(Math.PI/180)),t.scale(8,8),t.fillStyle="white",t.beginPath(),t.moveTo(0,-2),t.lineTo(1.5,2),t.lineTo(0,1),t.lineTo(-1.5,2),t.closePath(),t.fill(),this.thrusting&&(t.fillStyle="rgba(180,180,255, 0.8)",t.beginPath(),t.moveTo(0,1),t.lineTo(-1.2,3),t.lineTo(0,5),t.lineTo(1.2,3),t.closePath(),t.fill()),t.restore(),t.save(),t.translate(e.width/2,e.height-50),t.scale(3,1),t.fillStyle="#3f3f3f",t.beginPath(),t.rect(-this.health.max/2,10,this.health.max,20),t.fill(),t.fillStyle="#cf0000",t.beginPath(),t.rect(-this.health.current/2,10,this.health.current,20),t.fill(),t.fillStyle="#3f3f3f",t.beginPath(),t.rect(-this.shield.max/2,-20,this.shield.max,20),t.fill(),t.fillStyle="#0000cf",t.beginPath(),t.rect(-this.shield.current/2,-20,this.shield.current,20),t.fill(),t.restore()}update(e){for(this.angle+=this.turnSpeed*e*(this.turning.cw-this.turning.ccw),this.vel.x*=1-this.friction*e,this.vel.y*=1-this.friction*e,this.vel.x*this.vel.x+this.vel.y*this.vel.y<.01&&(this.vel.x=0,this.vel.y=0),this.thrusting&&(this.vel.x+=this.thrust*e*Math.sin(this.angle*(Math.PI/180)),this.vel.y-=this.thrust*e*Math.cos(this.angle*(Math.PI/180))),super.update(e),this.damageCooldown.current-=e,this.projectiles.cooldown-=e,this.startFiring&&this.projectiles.cooldown<=0&&(this.startFiring=!1,this.firing=!0,this.projectiles.cooldown=0);this.firing&&this.projectiles.cooldown<=0;)this.shoot();this.shield.current<this.shield.max&&this.damageCooldown.current<=0&&(this.shield.current+=this.shield.max/this.regenRate*e,this.shield.current>this.shield.max&&(this.shield.current=this.shield.max)),this.bullets.forEach((t=>{t.update(e)})),this.bullets=this.bullets.filter((e=>e.lifetime>0))}checkCollisions(){this.game.asteroids.forEach((e=>{if(c(this,e)){let t={x:e.pos.x-this.pos.x,y:e.pos.y-this.pos.y};e.vel.x+=t.x*(this.health.max/20),e.vel.y+=t.y*(this.health.max/20);let s=e.radius;s>30&&(s=30),this.vel.x-=s/3*t.x,this.vel.y-=s/3*t.y,this.damage(s),e.damage(this.health.max)}})),this.bullets.forEach((e=>{e.checkCollisions()}))}shoot(){this.bullets.length<this.bulletLimit&&this.bullets.push(new m(this)),this.projectiles.cooldown+=1/this.projectiles.rate,this.sounds.shoot1.play()}damage(e){this.damageCooldown.current=this.damageCooldown.max,this.shield.current-=e,this.shield.current<0&&(this.health.current+=this.shield.current,this.shield.current=0,this.health.current<=0&&(this.game.state="game over"))}}class m extends o{constructor(e){super({x:e.pos.x+e.vel.x*e.projectiles.cooldown,y:e.pos.y+e.vel.y*e.projectiles.cooldown},{x:e.vel.x+e.bullet.speed*Math.sin(e.angle*(Math.PI/180)),y:e.vel.y-e.bullet.speed*Math.cos(e.angle*(Math.PI/180))},e.angle,e.worldSize),this.parent=e,this.radius=4*this.parent.bullet.size,this.lifetime=e.bullet.lifetime,this.update(-e.projectiles.cooldown)}draw(){this.parent.game.canvas;const e=this.parent.game.ctx;e.save(),e.translate(this.pos.x,this.pos.y),e.rotate(this.angle*(Math.PI/180)),e.scale(2*this.parent.bullet.size,2*this.parent.bullet.size),this.parent.bullet.enemy?e.fillStyle="red":e.fillStyle="white",e.beginPath(),e.moveTo(0,-2),e.lineTo(1.5,2),e.lineTo(0,1),e.lineTo(-1.5,2),e.closePath(),e.fill(),e.restore()}update(e){super.update(e),this.lifetime-=e}checkCollisions(){this.parent.game.asteroids.forEach((e=>{c(this,e)&&(e.damage(this.parent.bullet.damage),this.lifetime=0)}))}}class u extends o{constructor(e,t,s,a,i){super(t,{x:0,y:0},360*Math.random(),s),this.points=[],this.radius=e;let l,h=this.radius/3,n=this.radius-h/2,r=0,c=n+Math.random()*h;for(this.points.push({x:0,y:-c}),r+=5+20*Math.random();r<360;)l=n+Math.random()*h,this.points.push({x:l*Math.sin(r*(Math.PI/180)),y:-l*Math.cos(r*(Math.PI/180))}),r+=5+20*Math.random();this.health=e,this.sounds=a,this.asteroids=i;let o=20+Math.random()*(2e3/this.radius);this.vel={x:o*Math.sin(this.angle*(Math.PI/180)),y:o*Math.cos(this.angle*(Math.PI/180))}}draw(e){e.save(),e.strokeStyle="white",e.fillStyle="#404040",e.translate(this.pos.x,this.pos.y),e.rotate(this.angle*(Math.PI/180)),e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(let t=1;t<this.points.length;t++)e.lineTo(this.points[t].x,this.points[t].y);e.closePath(),e.fill(),e.stroke(),e.restore()}damage(e){if(!(this.health<=0)&&(this.health-=e,this.sounds.hit1.play(),this.health<=0&&(this.sounds.hit2.play(),this.radius>20))){let e=Math.floor(this.radius/10);e>5&&(e=5);let t=Math.floor(2+Math.random()*(e-1));for(let e=0;e<t;e++)this.asteroids().push(new u(this.radius/t,this.pos,this.worldSize,this.sounds,this.asteroids))}}}const p=document.createElement("template");p.innerHTML="\n<style>\ncanvas {\n\theight: 100%;\n\twidth: 100%;\n}\n:host {\n\toverflow: hidden;\n}\n</style>\n<canvas>\n";class g extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(p.content.cloneNode(!0)),this.canvas=this.shadowRoot.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.resolution=1080,document.defaultView.onresize=()=>{this.canvas.width=this.offsetWidth/this.offsetHeight*this.resolution,this.canvas.height=this.resolution},this.canvas.onmousemove=e=>{const t=this.canvas.width/this.canvas.offsetWidth,s=this.canvas.height/this.canvas.offsetHeight;this.mousePos={x:e.clientX*t,y:(e.clientY-this.canvas.offsetTop)*s}},this.canvas.onmousedown=this.canvas.onmouseup=e=>{this.mouseState=e.buttons},this.canvas.oncontextmenu=e=>{e.preventDefault()},"function"==typeof io){console.log("io exists, running face controls"),this.socket=io("http://127.0.0.1:8081");let e=()=>{this.socket.emit("config",{server:{port:3333,host:"127.0.0.1"},client:{port:3334,host:"127.0.0.1"}})};this.socket.on("connect",e);let t=e=>{this.faceRot=e[5][3],e[5][3]<-.4?(this.player.turning.cw=1,this.player.turning.ccw=0):e[5][3]>.4?(this.player.turning.ccw=1,this.player.turning.cw=0):(this.player.turning.ccw=0,this.player.turning.cw=0),this.faceSca=e[4][1],e[4][1]>5.5?this.player.thrusting=!0:this.player.thrusting=!1,this.faceMou=e[7][1],e[7][1]>5?this.player.firing||(this.player.startFiring=!0):this.player.firing=!1};this.socket.on("message",t)}document.onkeydown=e=>{switch(e.keyCode){case 87:this.player.thrusting=!0;break;case 65:this.player.turning.ccw=1;break;case 68:this.player.turning.cw=1;break;case 32:this.player.firing||(this.player.startFiring=!0)}},document.onkeyup=e=>{switch(e.keyCode){case 87:this.player.thrusting=!1;break;case 65:this.player.turning.ccw=0;break;case 68:this.player.turning.cw=0;break;case 32:this.player.firing=!1}},this.tutorials={ui:{activate(){this.time=15},time:0,draw(e){const t=e.canvas,s=e.ctx;s.save(),s.translate(t.width/2,t.height-50),s.globalAlpha=this.time/2,s.textAlign="center",s.font="40px Futura";let a=e.player.health.max<e.player.shield.max?3*e.player.shield.max:3*e.player.health.max;s.fillStyle="white",s.strokeStyle="#cf0000",s.fillText("Health",-a/2-65,35),s.strokeText("Health",-a/2-65,35),s.strokeStyle="#0000cf",s.fillText("Shield",-a/2-65,0),s.strokeText("Shield",-a/2-65,0),s.strokeStyle="white",s.fillStyle="rgba(255,255,255,0.1)",s.lineWidth=4,s.beginPath(),s.rect(-a/2,-30,a,80),s.stroke(),s.fill(),s.restore()}},controls:{activate(){this.time=5,this.turnLeft=!1,this.turnRight=!1,this.thrust=!1,this.shoot},time:0,draw(e){const t=e.canvas,s=e.ctx;s.save(),s.translate(100,t.height/2),s.globalAlpha=this.time/2,s.font="50px Futura",s.strokeStyle="white",s.save(),s.lineWidth=5,s.fillStyle="rgba(255,255,255,0.05)",s.beginPath(),s.rect(0,-t.height/4,300,300),s.stroke(),s.fill(),s.restore(),s.save(),s.translate(50,-t.height/4+50),s.scale(6,6),s.save(),s.rotate(Math.PI/180*45),s.fillStyle="white",s.beginPath(),s.moveTo(0,-2),s.lineTo(1.5,2),s.lineTo(0,1),s.lineTo(-1.5,2),s.closePath(),s.fill(),s.restore(),s.beginPath(),s.arc(0,0,4.2,Math.PI/180*180,Math.PI/180*270),s.stroke(),s.beginPath(),s.arc(0,0,4.2,Math.PI/180*0,Math.PI/180*90),s.stroke(),s.beginPath(),s.moveTo(0,-4),s.lineTo(-1,-3.5),s.lineTo(-1,-4.5),s.closePath(),s.stroke(),s.beginPath(),s.moveTo(0,4),s.lineTo(1,3.5),s.lineTo(1,4.5),s.closePath(),s.stroke(),s.restore(),s.save(),s.translate(50,-t.height/4+150),s.rotate(Math.PI/180*45),s.scale(6,6),s.fillStyle="white",s.beginPath(),s.moveTo(0,-2),s.lineTo(1.5,2),s.lineTo(0,1),s.lineTo(-1.5,2),s.closePath(),s.fill(),s.fillStyle="rgba(180,180,255, 0.8)",s.beginPath(),s.moveTo(0,1),s.lineTo(-1.2,3),s.lineTo(0,5),s.lineTo(1.2,3),s.closePath(),s.fill(),s.restore(),s.save(),s.translate(50,-t.height/4+250),s.rotate(Math.PI/180*45),s.fillStyle="white",s.save(),s.scale(6,6),s.beginPath(),s.moveTo(0,-2),s.lineTo(1.5,2),s.lineTo(0,1),s.lineTo(-1.5,2),s.closePath(),s.fill(),s.restore(),s.scale(2,2),s.beginPath(),s.moveTo(0,-13),s.lineTo(1.5,-9),s.lineTo(0,-10),s.lineTo(-1.5,-9),s.closePath(),s.fill(),s.beginPath(),s.moveTo(0,-19),s.lineTo(1.5,-15),s.lineTo(0,-16),s.lineTo(-1.5,-15),s.closePath(),s.fill(),s.restore(),s.fillStyle="white",s.lineWidth=2,s.lineJoin="round",s.fillText("A",120,-t.height/4+70),s.beginPath(),s.rect(113,-t.height/4+30,50,50),s.stroke(),s.fillText("D",200,-t.height/4+70),s.beginPath(),s.rect(193,-t.height/4+30,50,50),s.stroke(),s.fillText("W",120,-t.height/4+170),s.beginPath(),s.rect(117,-t.height/4+128,50,50),s.stroke(),s.fillText("Space",120,-t.height/4+260),s.beginPath(),s.rect(117,-t.height/4+220,130,58),s.stroke(),s.restore()}}},document.defaultView.onresize(),this.mousePos={x:0,y:0},this.worldSize=3e3,this.mouseState=0,this.lastMouseState=0,this.sounds={},this.player=new d({x:0,y:0},this),this.state="loading",this.loading=0,this.lastFrameTime=window.performance.now()/1e3,this.loop()}drawLoading(e,t){this.ctx.save(),this.ctx.fillStyle="white",this.ctx.strokeStyle="white",this.ctx.textAlign="center",this.ctx.font="30px Comic Sans MS",this.ctx.fillText("Loading...",this.canvas.width/2,this.canvas.height/2-20),this.ctx.beginPath(),this.ctx.rect(this.canvas.width/3,this.canvas.height/2,this.canvas.width/3,30),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(this.canvas.width/3,this.canvas.height/2,this.canvas.width/3*(e/100),30),this.ctx.fill(),this.ctx.lineWidth=5,this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2+100,this.canvas.height/2-30,20,2*Math.PI*(t%1/1),2*Math.PI*(t%1/1)+2/3*Math.PI),this.ctx.stroke(),this.ctx.restore()}loop(){requestAnimationFrame((()=>this.loop()));const e=window.performance.now()/1e3,t=e-this.lastFrameTime;switch(this.lastFrameTime=e,this.ctx.fillStyle="black",this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fill(),this.state){case"loading":this.drawLoading(this.loading,e);break;case"main menu":this.ctx.save(),this.ctx.save();let i=this.resolution/1024;this.canvas.width>this.canvas.height&&(i=this.canvas.width/1024),this.ctx.scale(i,i),this.ctx.drawImage(this.images.purple6,0,0),this.ctx.restore(),this.ctx.save(),this.ctx.fillStyle="red",this.ctx.strokeStyle="white",this.ctx.textAlign="center",this.ctx.font="300px Futura",this.ctx.fillText("VOID",this.canvas.width/2,this.canvas.height/2-300),this.ctx.strokeText("VOID",this.canvas.width/2,this.canvas.height/2-300),this.ctx.fillText("BREAK",this.canvas.width/2,this.canvas.height/2-80),this.ctx.strokeText("BREAK",this.canvas.width/2,this.canvas.height/2-80),this.ctx.restore(),this.ctx.save(),this.ctx.fillStyle="red",s={x:this.mousePos.x,y:this.mousePos.y,w:0,h:0},a={x:this.canvas.width/2-90,y:this.canvas.height/2+130,w:185,h:75},s.x+s.w>a.x&&s.x<a.x+a.w&&s.y+s.h>a.y&&s.y<a.y+a.h&&(this.mouseState%2==1?this.ctx.fillStyle="darkRed":this.lastMouseState%2==1&&this.mouseState%2==0?(this.worldSize=this.defaults.worldSize,this.background=this.defaults.background,this.asteroidSpawning=this.defaults.asteroidSpawning,this.player.reset(),this.tutorials.ui.activate(),this.tutorials.controls.activate(),this.asteroids=[],this.score=0,this.state="game"):this.ctx.fillStyle="coral"),this.ctx.strokeStyle="white",this.ctx.textAlign="center",this.ctx.font="100px Futura",this.ctx.fillText("Start",this.canvas.width/2,this.canvas.height/2+200),this.ctx.strokeText("Start",this.canvas.width/2,this.canvas.height/2+200),this.ctx.restore(),this.ctx.restore();break;case"game":this.player.update(t),this.asteroids.forEach((e=>{e.update(t)})),this.asteroids=this.asteroids.filter((e=>e.health>0||(this.score++,!1)));for(const e in this.tutorials)this.tutorials[e].time-=t;for(;this.asteroids.length<this.asteroidSpawning.minLimit+this.score/this.asteroidSpawning.scorePerLimit;){let e=360*Math.random();this.asteroids.push(new u(this.asteroidSpawning.minSize+this.score/this.asteroidSpawning.scorePerSize,{x:this.player.pos.x+this.worldSize/2*Math.sin(e*(Math.PI/180)),y:this.player.pos.y+this.worldSize/2*Math.cos(e*(Math.PI/180))},this.worldSize,this.sounds,(()=>this.asteroids)))}this.player.checkCollisions(),this.ctx.save(),this.ctx.save(),this.ctx.translate(this.canvas.width/2-this.player.pos.x,this.canvas.height/2-this.player.pos.y);for(let e=-1;e<2;e++)for(let t=-1;t<2;t++)this.ctx.save(),this.ctx.translate(this.worldSize*e,this.worldSize*t),this.ctx.drawImage(this.images[this.defaults.background],0,0,this.worldSize,this.worldSize),this.ctx.restore();for(let e=-1;e<2;e++)for(let t=-1;t<2;t++)this.ctx.save(),this.ctx.translate(this.worldSize*e,this.worldSize*t),this.player.bullets.forEach((e=>{e.draw()})),this.asteroids.forEach((e=>{e.draw(this.ctx)})),this.ctx.restore();this.ctx.restore();for(const e in this.tutorials)this.tutorials[e].time>0&&this.tutorials[e].draw(this);this.player.draw(),this.ctx.fillStyle="white",this.ctx.font="40px Futura",this.ctx.fillText("Score: "+this.score,10,50),"function"==typeof io&&(this.ctx.fillText("Face detection active",10,100),this.ctx.fillText("Face tilt: "+this.faceRot.toFixed(2)+" / |0.4|",10,150),this.ctx.fillText("Face scale: "+this.faceSca.toFixed(1)+" / 5.5",10,200),this.ctx.fillText("Mouth open: "+this.faceMou.toFixed(1)+" / 5.0",10,250)),this.ctx.restore()}var s,a;this.lastMouseState=this.mouseState}}customElements.define("void-break",g);const f=document.querySelector("void-break"),x={purple5:"/assets/img/backgrounds/large/purple/purple-nebula-5.jpg",purple6:"/assets/img/backgrounds/large/purple/purple-nebula-6.jpg"};f.sounds.shoot1=new Howl({src:["/assets/sounds/shoot1.wav"]}),f.sounds.shoot1.volume(.3),f.loading+=100/6,f.sounds.hit1=new Howl({src:["/assets/sounds/hit1.wav"]}),f.sounds.hit1.volume(.5),f.loading+=100/6,f.sounds.hit2=new Howl({src:["/assets/sounds/hit2.wav"]}),f.sounds.hit2.volume(.5),f.loading+=100/6,fetch("/assets/data/defaults.json").then((e=>e.json())).then((e=>{f.loading+=100/6,f.defaults=e,f.loading>=99.9&&(f.images=x,f.state="main menu")}));for(let e in x){let t=new Image;t.src=x[e],x[e]=t,t.onload=function(){f.loading+=100/6,f.loading>=99.9&&(f.images=x,f.state="main menu")},t.onerror=function(){console.log("ERROR: image named '"+e+"' at "+this.src+" did not load!")}}})();